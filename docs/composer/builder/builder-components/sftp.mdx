---
id: sftp
title: SFTP Component
sidebar_label: SFTP
description: Read, write, move and delete files on an SFTP server. Learn more about using Composer's SFTP component.
---

[//]: # "DO NOT EDIT THIS FILE MANUALLY."
[//]: # "This file was auto generated using scripts in docusaurus/scripts/components/"

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import ComponentInputsTable from "@site/src/components/component-inputs-table";
import ExampleIntegrationLink from "@site/src/components/example-integration-link";
import OAuthCallbackURL from "@site/src/components/oauth-callback-url";
import Screenshot from "@site/src/components/screenshot";
import Vimeo from "@site/src/components/vimeo";

<div className="avatar">
  <div className="avatar__photo-link avatar__photo avatar__photo--lg">
    <img
      src="data:image/png;base64,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"
      alt="SFTP"
    />
  </div>
  <div className="avatar__intro">
    <h4 className="avatar__name">
      Read, write, move and delete files on an SFTP server
    </h4>
    <small className="avatar__subtitle">
      Component key: <b>sftp</b>
    </small>
  </div>
</div>

## Description

The SFTP (_SSH File Transfer Protocol_) component lets you upload, download, move and delete files on an SFTP server.

A common integration pattern involves listing files in a file store, and performing a series of actions on the array of files that are returned.
See our [looping over files](/docs/composer/builder/custom-components/quickstarts/looping-over-files.mdx) quickstart for information about how to create a loop over an array of files.

## Connections

### Basic Username/Password

The **basic auth** connection is used to connect to SFTP servers that support username / password login.
Consult your SFTP server administrator to determine which login method the server supports.

**On-prem enabled**: this connection can be configured to connect to an on-prem resource on a private network. [Learn more](/docs/composer/builder/on-prem-agent.mdx).

<ComponentInputsTable
  inputs={[
    {
      placeholder: "Name of the host",
      required: true,
      comments:
        "The address of the SFTP server. This should be either an IP address or hostname.",
      example: "sftp.elasticpathintegrations.com",
      key: "host",
      type: "string",
      default: "",
      label: "Host",
      onPremiseControlled: true,
    },
    {
      placeholder: "Password",
      required: true,
      example: "p@s$W0Rd",
      key: "password",
      type: "password",
      default: "",
      label: "Password",
    },
    {
      placeholder: "Port of the host",
      required: true,
      comments: "The port of the SFTP server.",
      example: "2222",
      key: "port",
      type: "string",
      default: "22",
      label: "Port",
      onPremiseControlled: true,
    },
    {
      placeholder: "Timeout",
      required: false,
      comments: "How long the client will await a request.",
      example: "4000",
      key: "timeout",
      type: "string",
      default: "3000",
      label: "Timeout",
    },
    {
      placeholder: "Username",
      required: true,
      example: "john.doe",
      key: "username",
      type: "string",
      default: "",
      label: "Username",
    },
  ]}
/>

### Private Key

The **private key** connection allows you to access an SFTP server via SSH [public/private key authentication](https://www.ssh.com/academy/ssh/public-key-authentication).
You will need to generate a public/private key pair, and ensure that your public key is stored on the SFTP server that you are connecting to.
Then, you can authenticate with the SFTP server using a username and corresponding private key.

**On-prem enabled**: this connection can be configured to connect to an on-prem resource on a private network. [Learn more](/docs/composer/builder/on-prem-agent.mdx).

<ComponentInputsTable
  inputs={[
    {
      placeholder: "Name of the host",
      required: true,
      comments:
        "The address of the SFTP server. This should be either an IP address or hostname.",
      example: "sftp.elasticpathintegrations.com",
      key: "host",
      type: "string",
      default: "",
      label: "Host",
      onPremiseControlled: true,
    },
    {
      placeholder: "Passphrase",
      required: false,
      comments: "Passphrase for the private key. Leave blank if none.",
      example: "p@s$PHr@$3",
      key: "passphrase",
      type: "password",
      default: "",
      label: "Key Passphrase",
    },
    {
      placeholder: "Password",
      required: false,
      comments:
        "Though uncommon, some SFTP servers that use private keys may also require a password. Leave blank if none.",
      example: "p@s$W0Rd",
      key: "password",
      type: "password",
      default: "",
      label: "Password",
    },
    {
      placeholder: "Port of the host",
      required: true,
      comments: "The port of the SFTP server.",
      example: "2222",
      key: "port",
      type: "string",
      default: "22",
      label: "Port",
      onPremiseControlled: true,
    },
    {
      placeholder: "SSH Private Key",
      required: true,
      comments: "SSH private key",
      example: "-----BEGIN OPENSSH PRIVATE KEY-----\nabc123...",
      key: "privateKey",
      type: "text",
      default: "",
      label: "Private Key",
    },
    {
      placeholder: "Timeout",
      required: false,
      comments: "How long the client will await a request.",
      example: "4000",
      key: "timeout",
      type: "string",
      default: "3000",
      label: "Timeout",
    },
    {
      placeholder: "Username",
      required: true,
      example: "john.doe",
      key: "username",
      type: "string",
      default: "",
      label: "Username",
    },
  ]}
/>

## Actions

<div id="createdirectory" />

### Create Directory

Create a new directory. If the recursive flag is set to true, the method will create any directories in the path which do not already exist. | <small><b>key: createDirectory</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      comments:
        "Show additional debug output in logs. Note: SFTP is very verbose - expect hundreds of debug lines when this is enabled.",
      required: true,
      key: "debug",
      type: "boolean",
      default: "false",
      label: "Show Debug Output",
    },
    {
      placeholder: "Path of directory on an SFTP server to list files of",
      required: true,
      comments: "Path of directory on an SFTP server to list files of",
      example: "/path/to/directory/",
      key: "path",
      type: "string",
      default: "",
      label: "Path",
    },
    {
      comments: "If true, create any missing directories in the path as well",
      required: false,
      key: "recursive",
      type: "boolean",
      default: "true",
      label: "Recursive",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": "/path/to/new/directory/"
}
```

<hr className="componentActionSeparator" />

<div id="deletefile" />

### Delete File

Delete a file from a SFTP server | <small><b>key: deleteFile</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      comments:
        "Show additional debug output in logs. Note: SFTP is very verbose - expect hundreds of debug lines when this is enabled.",
      required: true,
      key: "debug",
      type: "boolean",
      default: "false",
      label: "Show Debug Output",
    },
    {
      placeholder: "Path of file to delete",
      required: true,
      comments: "Path of file to delete",
      example: "/path/to/file.txt",
      key: "path",
      type: "string",
      default: "",
      label: "Path",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="listdirectory" />

### List Directory

List files in a directory on an SFTP server | <small><b>key: listDirectory</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      comments:
        "Show additional debug output in logs. Note: SFTP is very verbose - expect hundreds of debug lines when this is enabled.",
      required: true,
      key: "debug",
      type: "boolean",
      default: "false",
      label: "Show Debug Output",
    },
    {
      placeholder: "Path of directory on an SFTP server to list files of",
      required: true,
      comments: "Path of directory on an SFTP server to list files of",
      example: "/path/to/directory/",
      key: "path",
      type: "string",
      default: "",
      label: "Path",
    },
    {
      placeholder: "Glob-style string for listing specific files",
      required: false,
      comments: "Glob-style string for listing specific files",
      example: "*.txt",
      key: "pattern",
      type: "string",
      default: "*",
      label: "Pattern",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": [
    "file.txt",
    "example.txt"
  ]
}
```

<hr className="componentActionSeparator" />

<div id="movefile" />

### Move File

Move a file on an SFTP server | <small><b>key: moveFile</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      comments:
        "Show additional debug output in logs. Note: SFTP is very verbose - expect hundreds of debug lines when this is enabled.",
      required: true,
      key: "debug",
      type: "boolean",
      default: "false",
      label: "Show Debug Output",
    },
    {
      placeholder: "Path to move the file to",
      required: true,
      comments: "Path of file to move",
      example: "/my/destination/path.txt",
      key: "destinationPath",
      type: "string",
      default: "",
      label: "Destination Path",
    },
    {
      placeholder: "Path of file to move",
      required: true,
      comments: "Path of file to move",
      example: "/my/starting/path.txt",
      key: "sourcePath",
      type: "string",
      default: "",
      label: "Source Path",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="readfile" />

### Read File

Read a file from SFTP | <small><b>key: readFile</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      comments:
        "Show additional debug output in logs. Note: SFTP is very verbose - expect hundreds of debug lines when this is enabled.",
      required: true,
      key: "debug",
      type: "boolean",
      default: "false",
      label: "Show Debug Output",
    },
    {
      placeholder: "Path on SFTP server to read data from",
      required: true,
      comments: "Path of file on SFTP server to read data from",
      example: "/path/to/file.txt",
      key: "inputPath",
      type: "string",
      default: "",
      label: "Path",
    },
    {
      required: true,
      comments:
        "Always treat the file as a binary file with content type 'application/octet-stream', even if it is a text file. This is helpful if you are processing non-UTF-8 text files, as the runner assumes text files are UTF-8.",
      key: "returnBuffer",
      type: "boolean",
      default: "false",
      label: "Always Return Buffer",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": "Sample file contents",
  "contentType": "text/plain"
}
```

<hr className="componentActionSeparator" />

<div id="statfile" />

### Stat File

Pull statistics about a file | <small><b>key: statFile</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      comments:
        "Show additional debug output in logs. Note: SFTP is very verbose - expect hundreds of debug lines when this is enabled.",
      required: true,
      key: "debug",
      type: "boolean",
      default: "false",
      label: "Show Debug Output",
    },
    {
      placeholder: "Path on SFTP server to read data from",
      required: true,
      comments: "Path of file on SFTP server to read data from",
      example: "/path/to/file.txt",
      key: "inputPath",
      type: "string",
      default: "",
      label: "Path",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": {
    "mode": 33279,
    "uid": 1000,
    "gid": 985,
    "size": 5,
    "accessTime": 1566868566000,
    "modifyTime": 1566868566000,
    "isDirectory": false,
    "isFile": true,
    "isBlockDevice": false,
    "isCharacterDevice": false,
    "isSymbolicLink": false,
    "isFIFO": false,
    "isSocket": false
  }
}
```

<hr className="componentActionSeparator" />

<div id="writefile" />

### Write File

Write a file to SFTP | <small><b>key: writeFile</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      placeholder: "Data to write",
      required: true,
      comments: "Text to write into the file",
      key: "data",
      type: "text",
      default: "",
      label: "Data",
    },
    {
      comments:
        "Show additional debug output in logs. Note: SFTP is very verbose - expect hundreds of debug lines when this is enabled.",
      required: true,
      key: "debug",
      type: "boolean",
      default: "false",
      label: "Show Debug Output",
    },
    {
      placeholder: "Path on SFTP server to write file",
      required: true,
      comments: "Path on SFTP server to write file",
      example: "/we/love/commas.csv",
      key: "outputPath",
      type: "string",
      default: "",
      label: "Path",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": "Uploaded data stream to /upload/path/to/file.txt"
}
```

<hr className="componentActionSeparator" />
