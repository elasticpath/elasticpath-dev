---
id: google-gmail
title: Gmail Component
sidebar_label: Gmail
description: Manage Messages in Google's email service. Learn more about using Composer's Gmail component.
---

[//]: # "DO NOT EDIT THIS FILE MANUALLY."
[//]: # "This file was auto generated using scripts in docusaurus/scripts/components/"

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import ComponentInputsTable from "@site/src/components/component-inputs-table";
import ExampleIntegrationLink from "@site/src/components/example-integration-link";
import OAuthCallbackURL from "@site/src/components/oauth-callback-url";
import Screenshot from "@site/src/components/screenshot";
import Vimeo from "@site/src/components/vimeo";

<div className="avatar">
  <div className="avatar__photo-link avatar__photo avatar__photo--lg">
    <img
      src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAAFxEAABcRAcom8z8AAAAHdElNRQfoAhsSGAxfFBPdAAAU1klEQVR42u3deZAc5X3G8W/37OpiWSGJKDpckkoS2lUZG7AloEyqtBiMK4cTl5NC4jDFkUDKcYJScRBYECAccSwMcuUAyeFIMIWQAGNiC8cVcVRwnNLKeMEmmPsIoGWNQFodK+3OdOePd1rb2+pZ5upr+vlUqRCzmt2e2Xl//fy63+4XRERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERyx4r7B/5k4fy6n3vaa2/GvbkiNRv5z7a6n9t+ZjHWbY2tAIwz8NuAo4CjgSnlxw4Ce8t/Qt8RFQNJk3EGvff57sB8vi1gCNjP6OfbDT4prkIQaQGoMOgnA8cBnwA+BSwBji2/QZPL23QQ2Af8GngJ+AXwXPnve4PfUMVAkhIy8CcCixj9fHcDMzFFwF8ADgDvA68AfZjP+EvAnuA3jLIYRFYAAoPfAhYCnwd+GzgJmA3YVX47FxgAfgl8H/hR+Y07XDlVBCROIQP/Y8BngT8AlgFzMHv/ariYYvAC5rO9FXieQPqNohA0vQCE7PWXAhcAXwIWU/2gr8QBXgMeBu7EVM3DVAgkShUG/tnAl4GPA+1N+DFvY3Z09wDPYD7zQPOLQFMLQGDwH4sZ+JdhYn4UXgT+GbgX+NB7UEVAohAY/JOBLwKXA8tpfMcW5h3gX4GNwOEPdTOLQNMKQGDwnwxcB5wFFCJ4Y/xGgB8C12N6KUBFQJorMPjnA2swe/2OGH78duBa4D/wtb3NKARNKQC+wW8DfwTchIn7cXoRU3QepNw7qQhIMwQG/wrgRuC3Yt6M94CbgQ3AIe/BRotAwwUgMPgvBP4eE/+TsAe4HbgVcwYBUCGQ+oRE/ouAqzB9fxIOAN/GFIJ9kHABCBn83wRmJPTmeBzMUdRrUEsgdQqJ/F/HRP7JSW8acBsm7Q5BY0WgWQcuvkQ6Br/3mn4PeAA4h/KpmEZmIEq+hET+7wKXkvzgB3OW4S+Ar1I+vtbIzMO6E4BvQH0a2ET8PX811BJI1UIi/8WYyD836W0L8QFwCfAI1J8C6ioAvsF/DOY0xe8n/W6MI7QlABUCMUL2oPOAtZjT2JOS3r5xPAOsxEyKq6sINNoCXICZ2Zdm/pZgFb7ZWWoLJGTwrwDuw0T+NA9+MFONV1OefFRPK1BzAfANmsXAn9KcmU9xWII5hfK3+M5SqAjkV0jk/wqm34/7FF8jVgGfqffJjSSAVZhpvlnSiZnAcTdwovegikD+BAb/PGA98C2SO8VXrxmY05MT63lyTQXAN1C8+c9Z5LUEm4CVxZLTNv2Yo3j46GkMnLE86W2TGOw67+Pse3Ahl505AtmK/JX8DnAC1N4G1JsAeoCupF91g7qAjRPaCzcUCvaxy04wxU1FoHUNnLGcgTOW43w4kdLA5I7bH5nyVbIX+cP8BmanVrN6CkA7Zo7/hKRfdRN0Fmz78imT2jdMnjThJO9BFYHW4/+duocK85y97beWBibfgu1mLfJXcgZ1zMOppwDMwlz91Cosy7a+4Lru/fjOEnh7C8m+wO+xB7gP1/oTSlZdfXNKLcXcaKcm9RSA40jnxIh6uZi5Al2YswQ34DtLoCKQXYEiPgVzlP9esh/5w3RibrRT03GAqguA7wBgN6P37ms1ncAVmBsxqCXIsMDvbB5m/nwWj/JXq0Ad992oJwEsIPpr/JNkA78LeC1BO6glyJLQyJ/to/zVmk+N1yvUOnWoDXPEMQ+8luAEzJ7jfRj9cM3c1pv09klAYOBPwVyhmuTlu3GbiSkAQ9U+odYEMAGYlvSrjFFoSyDpk8PIH2YKNe7Ua00ABeqccZRhXkuwGHMN9kPAiJJAOoS0ZSswd6Q6Lelty4IobmTYqryW4Hp0liAVQiK/N5dfg79KKgC18a4luAedJUiUIn9z1H8rkfxSS5CgCpE/iZt0tgQlgPqpJYjZOJFfg79OKgCNUUsQk5DIfyuK/A1TC9A4tQQRUuSPlhJA86glaLKQyP9nKPI3lQpAc/lbghO9B1UEalfhKP86FPmbSgWg+byWYBNmXYLD1xJIdQLvlf+OPWm4L39L0TGA6HQBdwCfwBywel/HBcYXEvm9pbha6fLzVFECiFYncCUhLYESwVgVIv8taPBHSgUgehajLcGYdQlUBEKLYSvcpDMzVADi47UEY9YlyHMRCLz2rN6XP9NUAOI1FdMSjFmXII8twTiRX0f5Y6QCED+L0XUJctcSjBP5L0NH+WOnApAcf0tw+C5LrVwENJc/fVQAkuW1BHfR4hOHAq9pPor8qaACkDyvJRizenErFYGQyP9dNLEnFTQRKD2WYFqCEzATh36d9YlDIUf5L0YTe1Kl6gRguyVsp4hZR0MiMhVzE9LMtwQhkX89mtgTKQuwcbFrGKNVJ4CdM5ZycMLR1qxdv2LS8F5cS91DRLzVi5cA1wIPAsWspAFdvpsMG5cDbpvV70xhAiVgsKrnVV0A7jvzH9jTMYuut55yP/P8ve6Cnb2WSQNW0q+9VflbgjHrEqS1CIRE/ouAr6O9fqRsXF4uTXXuO7CY/xmZyTHWMPDjqp5bdQH4oHMegPv8grOsd4493lrx7Ibip176nt1ePGgrDUTGawmOB64B+iB9i5OE7PXnAWuBC9B03shYQAnLfWJ4jrtxf7f9WqnTdYFdNbzlVY9cy3WwXAfbLbGnYzaPnbKmsPXUq9zdHXMcy3WSfi9amdcSbAJWkrKJQxUiv+byR8zGZY/b7t51oKt4894TrddKndi4FGo8BlDXrttyHYqFSVZv98rCltPXOW/MXl4yX9EBwgh1ARtJ0bUEmtiTDBuXV0udxZv2nuTefWBJ+1633apl0I/9XnVzAZc3Zi1r29yzzt6+dOVIsTBJaSBa3h2HjriWIG66L3/8LMDBcrYNz3XWDi63nxyeYztYDR2Fa7h5t1yHPR2zrcdOWdO29dQr2d0xp2SrCETJ3xKMmTgUVyHI8eq7ifEi/50Huko37z3RerXUade71/drykQgX0tgDUxbXDxzx/rSgv4dtgWWq7MEUam4enFUBwe1+m4ybFxeKXUWN+xfaj09PKu9hFVTnz/+926a0ZZgS886e/vSVcWRwiRXLUGkvNWL7ybidQkU+eNn4XqRv3S1ifyFRiN/UNPP3wVaAndPx2y1BNHyWoL7iaglUOSPn4n8E9w7D3Q5N+890W5W5A+K5FqAI1uCbzsL+nstwNLEocg0vSVQ5E9GIPK3NTPyH/mzIuNvCb5pbe9eVSyqJYia1xLcQ4MtgSJ//HxH+YtXDy4vRBH5gyK/GvBwS3Dqmrb+GUvdnr7bS1P37WzT7MHINLRUWUix6MHM5T8t6RfWysqR39k0tMjdPLTQHnQn1H1uv7afG4PRluBse/Ppt1ivzz7ZAdfVxKFI1bxUWYWJPfeiwR8pE/mnlm7ce5Jzz4Elhb1ueyT9fvjPjs3hlqCwpeebVq9agjhUvXqxIn/8ypHf3TY8t7h2cJn95PCctqgjf1DsNwTxWoKtp65p2zmj2+npu8NVSxCpcVuCELp8NwZJRf6gRO4I5L+WYGDa4pLOEsTCawk+SXmpssDXdZQ/Jl7k37C/2436KP9Hb0tixrQEqCWIRWhLgCJ/LLzI//jwnJGkIn9Q4vcELLcE9tZT19g7Z3QXe/ruQC1BpLyWYBHmAOFA+b+K/BEqR/7SpqFF1pahhYU9CUX+oMQLAJgiMFKYRG/3yraBaYsdXUsQi27M5cUH8a1LIM3n3bHnO/u73f8anlVIMvIfuW0pYY22BPaWnnXW9qWrSrqWIHJHo8EfGX/kv3pwmfVECiJ/UCoSgJ/XEjx2yhq7f3p3safvDmvqvp0FtQSSJV7kv39okfXg0MK2tET+oNQVADh8loDe7rO9lqC4oH9HAZ0lkAywcd2XS1PdjeYof6oi/5HbmlrmDSu3BPb2pec4OksgaVaO/Dw+PLd49eAy0nCU/6OkMgH4jbYEV9A/vWtkRd+GwjH73tWdiCVVfJGfNEf+oNQXABjTErQPTFvsfG7H+uJ8tQSSEr7Iz9PDs+wSViYGv9n2zBhtCTaPtgS6CakkZjTyz/Eif8HBsrK0S8pEAvAb2xIsGVnRtxG1BBI338Qed0uGIn9Q5goA+FuCVe0D045zPtd728j8955p11JlEgcb132lNNXZuL+b8sSeTA5+81oyy0wcen3WMnvz6esK25euUksgkRqd2DO3tHZwGU9kMPIHZTIB+Nmuw56OOfZjp1zh9k9fUlzRt9Gatu9dy1FLIE0UEvlTe26/FpkvAHD4WgKrt3ulaQl2rC/O7/9Zu4WLriWQRnmRf8P+bqt8lL8lBr95bS3CGnuWoGCuJZiolkDqVr4vv7vt0FxnrTnKb2c98ge1RALw850lcPund5VW9G1g2r53bMcqJL1pkiG+O/aUNg8tbB9skcgf1HIFAMbchLTtvWmLS2ftWD8yv39He/mrSW+epJzvvvx20nfsif61tizzC3tz1rLC5p51bduXnlMqqiWQcRy+SeehuaW1g8utVoz8QS2ZAPxGlyq7wu6f3uWs6NvgaOKQBNm47HYnuA8MLSpuHlrYltRNOuPW8gUAjrwJafksQRtu6/+CZXzmTrQur5Y6i3eYyN/U1XfTLke7wdGbkJqzBCuLxbaJjoXTyglPxmHhUjJLcTm+yJ+ro0S5SAB+vtWLC/3Tu9wzn7/LmcuB9qS3S+Jl4bLbmcgjB7pKD+xf1DboTohtNZ40yV0BgLGrF384ffGeBS9c339MafBEl5Y+3iM+wwX7V+vt7qlP7Z82u+TmJ/IH5agFCDK/8Jd+8+QPti44588t1/lH4EDSWyWRK1oum5+bNemSbdNmvOq4+Yr8QTkuAOU3wC1Z9y3+47dmvP/M14C/BN5MepskMruA648adi497/y5v8zrXt8v9wUAoGNkv7329B8MY+6Tfx7wZNLbJE33LHAx8HcPndC5Z+GuYX32UQE47KczT/f++hPgfOCfUEvQCorAZuBc4FGg9K0VM5LeptRQASizxsbBd4CvAatRS5BluzDLnl0G/K/3YJuj6O9RAfCZua3X/78Hge+gliCrDkd+YLf3YOB3nHu5PA04Hu8DMnDGcu8hryW4CvOBmpz0Nsq4isDDwHXAC96DGvjhlAAqCHxgvJbgctQSpJk/8mvwV0EFYBzjtARPJb1tcoTnMAntZhT5q6YW4CNUaAnOQy1BWijyN0AJoEpqCVJJkb9BKgA1mLmt1//h8lqC89FZgiQ8B1yCIn9DVADqEPiQPY0mDsXJm9izCvg+4MARxVmqpAJQpwotwWrUEkRJkb/JVAAaoJYgVor8EVABaAK1BJFS5I+QCkCTqCWIxC7M6T1F/oioADRRhZZA1xLUx5vYo7n8EVIBiJ4uL66NP/I/SjnygwZ/FDQTMAIhswe9luBZ4GpgXtLbmFK7gNswxXK396AGfnSUACJU4VqCc1FLEMY7yq/IHyMlgIhVuJbgy5hrCS4EpiS9jQkrAt8DrkUH+mKnBBCTwAf6beCvMDchfSvpbUuQN7HnUjT4E6EEEKNAGjiIuQnp88CNQE/S2xez54C/Af4d37l9iZcSQAICH3SvJcjLWYIisIWQiT0SPxWAhIS0BN66BK3cEngTexT5U0ItQIJy1hI8iznQ9wOg5H/9khwlgBRo8ZbAm9hzDibyl5LeIBmlApASFVqC1WS7Jag4l197/3RQAUiRFps45N2X/xtoYk9qqQCkTMjeMWstgXeU/xzKS3H5X5ukiwpASmX0LEHFiT0a/OmkApBiIS3BRkxLkMZ1CTSXP4N0GjDlxlmq7ErgIpK/lsCby38dvgU4NfCzQQkgIwIx2t8SJHnHIX/k1+DPIBWAjAnccWgjyd1x6IjVd9XrZ48KQAYlfJbAm9hzLr6j/Br42aQCkFHjnCWIsiXw35dfkb8FqABkWIWzBFG1BEdE/pBtkIzRWYCMG+cswVU05yyBVt9tYUoALSKidQm0FFeLUwFoIRWuJai3JdB9+XNALUCL+YiW4GJg8kd8C0X+HFECaFEVWoLLGb8lUOTPGRWAFlahJai0erEX+bX6bo6oBWhxIS2Bt3qx1xJMAB5CkT+XVAByYua23uBSZX8N/Bw4BrgL+ND/byUfVAByJJAGhoA7K/0byQcdA8ihsEGuC3nySQkgpzTYBZQARHJNBUAkx1QARHJMBUAkx1QARHJMBUAkx1QARHJMBUAkx1QARHJMBUAkx1QARHJMBUAkx1QARHJMBUAkx1QARHJMBUAkx1QARHJMBUAkx1QARHJMBUAkx1QARHJMBUAkx1QARHKsngLgJr3RItIctRaAYWBP0hstIqGKgFPLE2otAIeAnUm/ShEJtROz5mPV6mkBXgZKSb9SETnCq8D+Wp5QdQF4fG2H99de4IOkX6mIjHEIMzZrUk8CeBF4JulXKyJjvAn8tNYn1VMA9gKPojZAJE1+BPwfwI5VD1X9pHrnATwK/DzpVywiALwN/Bt17JRrKgC+4wBvA+up8YCDiDSdA9xJeYdcy94fGpsJ+DBwb9KvXiTnfgzcTo3n/z01FwBfChgCbgAeS/odEMmpnwFXAe9B7Xt/qDMB+IrAu8BqTBUSkfjsAC4D+hr5Js24GOgl4BLgX4CDSb8rIi2uBPwQuBiTAID69v7QQAHwpQAwBwVXA18Bnk36HRJpUa8D1wAXAr/wHqx38EODCSBQBPYDdwNfBK4A/hsYTOiNqkUBsJLeCElEIekNqMIQ8BxwE/AF4BvA+94XGxn8AG2Nbp1XBD570z7voTeAdcBdwCeBTwPHAx8DOoB20nNJsY2ZP30o6Q2R2JWAF4DJpGtSmwPswwzy5zG9fh/meNuYcdPo4Icm7/l8RSDIxlTbDppQdJqshLnEuRRINNKilm36QzCf/amYHVKaeAWgSIXC1IyB72nqYPQPoEAxcMp/PmzmzxNpgAvsTnojqtXMQS8iIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiknP/DxHs4c9833OpAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDI0LTAxLTExVDA2OjIzOjEwKzAwOjAwcQXy+QAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyNC0wMS0xMVQwNjoyMzoxMCswMDowMABYSkUAAAAodEVYdGRhdGU6dGltZXN0YW1wADIwMjQtMDItMjdUMTg6MjQ6MTIrMDA6MDDmujjFAAAAAElFTkSuQmCC"
      alt="Gmail"
    />
  </div>
  <div className="avatar__intro">
    <h4 className="avatar__name">Manage Messages in Google's email service</h4>
    <small className="avatar__subtitle">
      Component key: <b>google-gmail</b>
    </small>
  </div>
</div>

## Description

[Gmail](https://gmail.com/) is Google's email service.
This component allows you to fetch and filter and manage messages, and send new messages from a Google Gmail account.

API Documentation:
[Gmail API Documenetation](https://developers.google.com/gmail/api/guides)

Documentation for the Node.js client used in this component can be found at https://googleapis.dev/nodejs/googleapis/latest/gmail/index.html

Most actions in this component have a **Gmail User ID** input.
You can safely leave this input blank, and the default value, `me` will be used, indicating that the user who authenticated is the user whose Gmail account your integration will use.

:::tip Use labels to organize messages
Gmail uses **labels** in place of folders to organize messages.
Messages in a user's inbox have a label of `INBOX`.
You can apply custom labels to a message (so, you can loop only over messages with a particular label, etc).
:::

## Receiving notifications from Gmail

Gmail supports [push notifications](https://developers.google.com/gmail/api/guides/push) to let you know when a new message arrives in a user's inbox.
Behind the scenes, this uses [Google Cloud Pub/Sub](https://cloud.google.com/pubsub/docs/overview) to deliver the notifications.
In order to revieve notifications when new messages are received, you will need to set up a Pub/Sub topic and subscription, and then configure Gmail to send notifications to that topic.
The steps below will walk you through this process.

1. Create a Google Cloud IAM service account from https://console.cloud.google.com/iam-admin/serviceaccounts and grant the service account the `Pub/Sub Admin` role. Ensure that this IAM role exists in the same project as your Gmail OAuth app (see [OAuth 2.0](#oauth2) connection below).
2. Generate a new key for the service account, and download the JSON file. Take note of the `private_key`, `project_id` and `client_email` values in the JSON file - these will be used for creating the Pub/Sub topic and subscription.
3. Create a new Pub/Sub topic using the Google Cloud Pub/Sub component's [Create Topic](/docs/composer/builder/builder-components/google-cloud-pub-sub.mdx/#create-topic) action.
4. Create a new Pub/Sub subscription using the Google Cloud Pub/Sub component's [Create Webhook Subscription](/docs/composer/builder/builder-components/google-cloud-pub-sub.mdx/#create-webhook-subscription) action. Use the topic created in the previous step as the `Topic Name` input. For the webhook URL, choose a sibling flow of the webhook creation flow. The sibling flow will receive the webhook notifications.
5. Use this component's [Create Push Notification](#create-push-notification-watch-request) action. This will instruct Gmail to send notifications to the Pub/Sub topic created in step 3.

Some notes about the above steps:

- Subscription and topic names need to be unique. You can use the current instance's ID (available from the trigger payload) as a unique identifier for the topic and subscription names.
- The Pub/Sub topic and subscription must be created in the same project as the Gmail OAuth app.
- Push notification watch requests expire after 7 days. You'll need to periodically refresh the watch request. You can do that by calling the setup flow from another flow on a schedule.

The examples repo has an example integration that you can [import](integrations.mdx/#importing-an-integration) that demonstrates how to set up Gmail push notifications.

<ExampleIntegrationLink
  href="https://github.com/prismatic-io/examples/blob/main/integrations/gmail-with-webhooks.yml"
  text="Amazon S3 Events"
/>

## Connections

### OAuth2

The Gmail component authenticates requests through the Google Cloud Platform (GCP) OAuth 2.0 service.
You'll need to create a GCP OAuth 2.0 app so your integration can authenticate and perform Gmail tasks on your customers' behalf.

To create a Gmail OAuth 2.0 app, first make sure you have a Google Developer account - you can sign up at [https://console.cloud.google.com/](https://console.cloud.google.com/).
Then:

1. Open up the Gmail API console - [https://console.cloud.google.com/marketplace/product/google/gmail.googleapis.com](https://console.cloud.google.com/marketplace/product/google/gmail.googleapis.com)
1. You will be prompted to enable **Gmail API** for your project. Click **ENABLE**.
1. On the sidebar, select **APIs & Services** and then **Credentials**.
1. An OAuth 2.0 app includes a "Consent Screen" (the page that asks "Do you want to allow (Your Company) to access Gmail on your behalf?"). Click **CONFIGURE CONSENT SCREEN**.
   1. Your app will be externally available to your customers, so choose a **User Type** of **External**.
   1. Fill out the OAuth consent screen with an app name (your company or product's name), support email, app logo, domain, etc.
   1. You can ignore domains for now.
   1. On the next page, add any scopes releavant to your integration, like `https://www.googleapis.com/auth/gmail.readonly` and `https://www.googleapis.com/auth/gmail.send`.
   1. Enter some **test users** for your testing purposes.
      Your app will only work for those testing users until it is "verified" by Google.
      When you are ready for verification (they verify your privacy policy statement, etc), click **PUBLISH APP** on the **OAuth consent screen**.
      That'll allow your customers to authorize your integration to access their Gmail account.
1. Once your "Consent Screen" is configured open the **Credentials** page from the sidebar again.
1. Click **+CREATE CREDENTIALS** and select **OAuth Client ID**.
   1. Under **Application type** select **Web application**.
   1. Under **Authorized redirect URIs** enter Composer's OAuth 2.0 callback URL: `https://oauth2.prismatic.io/callback`
   1. Click **CREATE**.
1. Take note of the **Client ID** and **Client Secret** that are generated.

:::info
Make sure to **publish** your OAuth 2.0 app after you've tested it so users outside of your _test users_ can authorize your integration to interact with Gmail on their behalf.
:::

Now that you have a **Client ID** and **Client Secret**, add Gmail step to your integration in Composer.
Open the **Configuration Wizard Designer** by clicking **Configuration Wizard**, select your **Gmail Connection** and enter your client ID and secret.

:::info A note on scopes
You can keep the default [Gmail scope](https://developers.google.com/gmail/api/auth/scopes), `https://mail.google.com/`.
This will grant you full permission over your users' Gmail accounts.

If you would like to limit permissions, you can select a subset of scopes, like `https://www.googleapis.com/auth/gmail.readonly https://www.googleapis.com/auth/gmail.send`.
:::

<ComponentInputsTable
  inputs={[
    {
      placeholder: "Authorization URL",
      required: true,
      shown: false,
      comments: "The Authorization URL for Gmail",
      key: "authorizeUrl",
      type: "string",
      default:
        "https://accounts.google.com/o/oauth2/v2/auth?access_type=offline&prompt=consent",
      label: "Authorize URL",
    },
    {
      placeholder: "Client ID",
      required: true,
      comments: "Your Gmail app's Client ID",
      key: "clientId",
      type: "string",
      default: "",
      label: "Client ID",
    },
    {
      placeholder: "Client Secret",
      required: true,
      comments: "Your Gmail app's Client Secret",
      key: "clientSecret",
      type: "password",
      default: "",
      label: "Client Secret",
    },
    {
      placeholder: "Scopes",
      required: true,
      comments:
        "Space delimited listing of scopes. See https://developers.google.com/gmail/api/auth/scopes",
      key: "scopes",
      type: "string",
      default: "https://mail.google.com/",
      label: "Scopes",
    },
    {
      placeholder: "Token URL",
      required: true,
      shown: false,
      comments: "The Token URL for Gmail",
      key: "tokenUrl",
      type: "string",
      default: "https://oauth2.googleapis.com/token",
      label: "Token URL",
    },
  ]}
/>

## Triggers

<div id="pushnotificationwebhook" />

### Push Notification Webhook

Receive and validate webhook requests from Gmail for webhooks you configure. | <small><b>key: pushNotificationWebhook</b></small>

<ComponentInputsTable inputs={[]} />

#### Output Example Payload

```json
{
  "payload": {
    "headers": {
      "Accept": "application/json",
      "Accept-Encoding": "gzip, deflate, br",
      "Content-Type": "application/json",
      "From": "noreply@google.com",
      "Host": "hooks.prismatic.io",
      "User-Agent": "APIs-Google; (+https://developers.google.com/webmasters/APIs-Google.html)",
      "X-Amz-Cf-Id": "IfJGfd1Y6gtJX9BTs37_GnMRnliiMaMCxQ6EMM6dD1rqE7hMK12345==",
      "X-Amzn-Trace-Id": "Root=1-648cba10-7ea5bdfd45f98ad327612345"
    },
    "queryParameters": null,
    "rawBody": "<data (N bytes)>",
    "body": {
      "data": {
        "message": {
          "data": "<Base64 encoded data>",
          "decodedData": {
            "emailAddress": "",
            "historyId": "123456"
          },
          "messageId": "8406082761012345",
          "message_id": "8406082761012345",
          "publishTime": "2023-06-16T19:37:52.276Z",
          "publish_time": "2023-06-16T19:37:52.276Z"
        },
        "subscription": "projects/projectname-123456/subscriptions/SubscriptionName"
      },
      "contentType": "application/json"
    },
    "pathFragment": "",
    "webhookUrls": {
      "Flow 1": "https://hooks.prismatic.io/trigger/WEBHOOK_ID"
    },
    "webhookApiKeys": {
      "Flow 1": ["sample-api-key"]
    },
    "invokeUrl": "https://hooks.prismatic.io/trigger/WEBHOOK_ID",
    "executionId": "EXECUTION_ID",
    "customer": {
      "id": "testCustomerId",
      "name": "Test Customer",
      "externalId": "testCustomerExternalId"
    },
    "instance": {
      "id": "testInstanceId",
      "name": "Test Instance"
    },
    "user": {
      "id": "testUserId",
      "email": "testUserEmail@example.com",
      "name": "Test User",
      "externalId": "testUserExternalId"
    }
  }
}
```

<hr className="componentActionSeparator" />

## Actions

<div id="createpushnotification" />

### Create Push Notification (Watch Request)

Enables the ability to send update notifications like new messages received. | <small><b>key: createPushNotification</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      comments: "The Connection to use for authorization.",
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      comments:
        "System labels typically correspond to pre-defined elements in the Gmail web interface such as the inbox.",
      example: "INBOX",
      required: true,
      key: "labelIdsInput",
      type: "string",
      default: "",
      collection: "valuelist",
      label: "Label ID",
    },
    {
      required: true,
      example: "projects/prismatic-123456/topics/prismatic-gmail",
      key: "topicNameInput",
      type: "string",
      default: "",
      label: "Topic Name",
    },
    {
      required: false,
      comments:
        "A user whose account to query (defaults to currently authenticated user)",
      key: "userIdInput",
      type: "string",
      default: "",
      label: "Gmail User ID (optional)",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="deletepushnotification" />

### Delete Push Notification (Stop Mailbox Updates)

Calls a stop notification. | <small><b>key: deletePushNotification</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      comments: "The Connection to use for authorization.",
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      required: false,
      comments:
        "A user whose account to query (defaults to currently authenticated user)",
      key: "userIdInput",
      type: "string",
      default: "",
      label: "Gmail User ID (optional)",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="getcurrentuser" />

### Get Current User

Get metadata about the authenticated user | <small><b>key: getCurrentUser</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      comments: "The Connection to use for authorization.",
      key: "connection",
      type: "connection",
      label: "Connection",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": {
    "emailAddress": "example@gmail.com",
    "historyId": "1234567",
    "messagesTotal": 12345,
    "threadsTotal": 12345
  }
}
```

<hr className="componentActionSeparator" />

<div id="geteventhistory" />

### Get Event History

Fetch events that have occurred in the mailbox since the specified startHistoryId. | <small><b>key: getEventHistory</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      comments: "The Connection to use for authorization.",
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      required: true,
      comments: "The history ID to start history from.",
      key: "historyId",
      type: "string",
      default: "",
      label: "History ID",
    },
    {
      required: false,
      comments:
        "A user whose account to query (defaults to currently authenticated user)",
      key: "userId",
      type: "string",
      default: "",
      label: "Gmail User ID (optional)",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="getlabelbyname" />

### Get Label by Name

Get a label (including ID) by its name | <small><b>key: getLabelByName</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      comments: "The Connection to use for authorization.",
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      required: true,
      key: "labelName",
      type: "string",
      default: "",
      label: "Label Name",
    },
    {
      required: false,
      comments:
        "A user whose account to query (defaults to currently authenticated user)",
      key: "userId",
      type: "string",
      default: "",
      label: "Gmail User ID (optional)",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="getmessagebyid" />

### Get Message

Get a message by ID | <small><b>key: getMessageById</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      comments: "The Connection to use for authorization.",
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      required: true,
      example: "1234abcd",
      key: "messageId",
      type: "string",
      default: "",
      label: "Message ID",
    },
    {
      required: false,
      comments:
        "A user whose account to query (defaults to currently authenticated user)",
      key: "userId",
      type: "string",
      default: "",
      label: "Gmail User ID (optional)",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": {
    "id": "1234abcd",
    "threadId": "5678efgh",
    "labelIds": [
      "IMPORTANT",
      "SENT",
      "INBOX"
    ],
    "message": {
      "headers": {
        "mime-version": "1.0",
        "date": "2022-09-19T20:09:01.000Z",
        "message-id": "<Test-message-id@mail.gmail.com>",
        "subject": "Test Message",
        "from": {
          "value": [
            {
              "address": "example@gmail.com",
              "name": "Example Example"
            }
          ],
          "html": "<span class=\"mp_address_group\"><span class=\"mp_address_name\">Example Example</span> &lt;<a href=\"mailto:example@gmail.com\" class=\"mp_address_email\">example@gmail.com</a>&gt;</span>",
          "text": "Example Example <example@gmail.com>"
        },
        "to": {
          "value": [
            {
              "address": "example@gmail.com",
              "name": "Example Example"
            }
          ],
          "html": "<span class=\"mp_address_group\"><span class=\"mp_address_name\">Example Example</span> &lt;<a href=\"mailto:example@gmail.com\" class=\"mp_address_email\">example@gmail.com</a>&gt;</span>",
          "text": "Example Example <example@gmail.com>"
        },
        "content-type": {
          "value": "multipart/mixed",
          "params": {
            "boundary": "000000000000680fa005e90d488f"
          }
        }
      },
      "attachments": [],
      "text": "Example email body",
      "html": "<div dir=\"ltr\">Example email body<div><br></div></div>\n"
    }
  }
}
```

<hr className="componentActionSeparator" />

<div id="listlabels" />

### List Labels

List all labels within this account | <small><b>key: listLabels</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      comments: "The Connection to use for authorization.",
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      required: false,
      comments:
        "A user whose account to query (defaults to currently authenticated user)",
      key: "userId",
      type: "string",
      default: "",
      label: "Gmail User ID (optional)",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="listmessages" />

### List Messages

Get a list of messages | <small><b>key: listMessages</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      comments: "The Connection to use for authorization.",
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      comments: "Show only messages with labels that match these label IDs",
      key: "labelIds",
      type: "string",
      default: "",
      collection: "valuelist",
      label: "Labels",
    },
    {
      required: false,
      comments:
        "If you're looping over pages of results, this is the page token from the result of the previous 'list messages' step.",
      key: "pageToken",
      type: "string",
      default: "",
      label: "Page Token",
    },
    {
      required: false,
      comments:
        "Only return messages matching the specified query. Supports the same query format as the Gmail search box.",
      example:
        "from:someuser@example.com rfc822msgid:<somemsgid@example.com> is:unread",
      key: "query",
      type: "string",
      default: "",
      label: "Query String",
    },
    {
      required: false,
      comments:
        "A user whose account to query (defaults to currently authenticated user)",
      key: "userId",
      type: "string",
      default: "",
      label: "Gmail User ID (optional)",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": {
    "messages": [
      {
        "id": "abcd1234",
        "threadId": "efgh5678"
      }
    ]
  }
}
```

<hr className="componentActionSeparator" />

<div id="rawrequest" />

### Raw Request

Send raw HTTP request to Google Gmail | <small><b>key: rawRequest</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      comments: "The Connection to use for authorization.",
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      placeholder: "Data to send",
      required: false,
      comments: "The HTTP body payload to send to the URL.",
      example: '{"exampleKey": "Example Data"}',
      key: "data",
      type: "string",
      default: "",
      label: "Data",
    },
    {
      required: false,
      comments: "Enabling this flag will log out the current request.",
      key: "debugRequest",
      type: "boolean",
      default: "false",
      label: "Debug Request",
    },
    {
      placeholder: "Data to send",
      required: false,
      comments: "File Data to be sent as a multipart form upload.",
      example: '[{key: "example.txt", value: "My File Contents"}]',
      key: "fileData",
      type: "string",
      default: "",
      collection: "keyvaluelist",
      label: "File Data",
    },
    {
      placeholder: "The file name to apply to a file",
      required: false,
      comments:
        "File names to apply to the file data inputs. Keys must match the file data keys above.",
      key: "fileDataFileNames",
      type: "string",
      default: "",
      collection: "keyvaluelist",
      label: "File Data File Names",
    },
    {
      placeholder: "Data to send",
      required: false,
      comments: "The Form Data to be sent as a multipart form upload.",
      example: '[{"key": "Example Key", "value": new Buffer("Hello World")}]',
      key: "formData",
      type: "string",
      default: "",
      collection: "keyvaluelist",
      label: "Form Data",
    },
    {
      placeholder: "Header",
      required: false,
      comments: "A list of headers to send with the request.",
      example: "User-Agent: curl/7.64.1",
      key: "headers",
      type: "string",
      default: "",
      collection: "keyvaluelist",
      label: "Header",
    },
    {
      placeholder: "Max Retries",
      required: false,
      comments: "The maximum number of retries to attempt.",
      key: "maxRetries",
      type: "string",
      default: "0",
      label: "Max Retry Count",
    },
    {
      required: true,
      model: [
        {
          label: "DELETE",
          value: "DELETE",
        },
        {
          label: "GET",
          value: "GET",
        },
        {
          label: "HEAD",
          value: "HEAD",
        },
        {
          label: "LINK",
          value: "LINK",
        },
        {
          label: "OPTIONS",
          value: "OPTIONS",
        },
        {
          label: "PATCH",
          value: "PATCH",
        },
        {
          label: "POST",
          value: "POST",
        },
        {
          label: "PURGE",
          value: "PURGE",
        },
        {
          label: "PUT",
          value: "PUT",
        },
        {
          label: "UNLINK",
          value: "UNLINK",
        },
      ],
      comments: "The HTTP method to use.",
      key: "method",
      type: "string",
      default: "",
      label: "Method",
    },
    {
      placeholder: "Query Parameter",
      required: false,
      comments:
        "A list of query parameters to send with the request. This is the portion at the end of the URL similar to ?key1=value1&key2=value2.",
      key: "queryParams",
      type: "string",
      default: "",
      collection: "keyvaluelist",
      label: "Query Parameter",
    },
    {
      placeholder: "Response Type",
      required: true,
      comments:
        "The type of data you expect in the response. You can request json, text, or binary data.",
      model: [
        {
          label: "arraybuffer",
          value: "arraybuffer",
        },
        {
          label: "document",
          value: "document",
        },
        {
          label: "json",
          value: "json",
        },
        {
          label: "text",
          value: "text",
        },
      ],
      key: "responseType",
      type: "string",
      default: "json",
      label: "Response Type",
    },
    {
      required: false,
      comments:
        "If true, retries on all erroneous responses regardless of type.",
      key: "retryAllErrors",
      type: "boolean",
      default: "false",
      label: "Retry On All Errors",
    },
    {
      placeholder: "Retry Delay",
      required: false,
      comments: "The delay in milliseconds between retries.",
      key: "retryDelayMS",
      type: "string",
      default: "0",
      label: "Retry Delay (ms)",
    },
    {
      required: false,
      comments:
        "The maximum time that a client will await a response to its request",
      example: "2000",
      key: "timeout",
      type: "string",
      default: "",
      label: "Timeout",
    },
    {
      placeholder: "URL to call",
      required: true,
      comments:
        "Input the path only (/v1/users/{userId}/messages), The base URL is already included (https://gmail.googleapis.com/gmail). For example, to connect to https://gmail.googleapis.com/gmail/v1/users/{userId}/messages, only /v1/users/{userId}/messages is entered in this field.",
      example: "/v1/users/{userId}/messages",
      key: "url",
      type: "string",
      default: "",
      label: "URL",
    },
    {
      required: false,
      comments:
        "Specifies whether to use a pre-defined exponential backoff strategy for retries.",
      key: "useExponentialBackoff",
      type: "boolean",
      default: "false",
      label: "Use Exponential Backoff",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="sendmessage" />

### Send Message

Send a new message | <small><b>key: sendMessage</b></small>

<ComponentInputsTable
  inputs={[
    {
      comments:
        "Specify a file name as the key (i.e. 'my-file.pdf'), and the file as the value",
      key: "attachments",
      type: "string",
      default: "",
      collection: "keyvaluelist",
      label: "Attachments",
    },
    {
      required: false,
      key: "bcc",
      type: "string",
      default: "",
      collection: "valuelist",
      label: "BCC",
    },
    {
      required: false,
      key: "cc",
      type: "string",
      default: "",
      collection: "valuelist",
      label: "CC",
    },
    {
      required: true,
      comments: "The Connection to use for authorization.",
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      comments:
        "An array of objects with 'key' and 'value' properties, where 'key' is the file name and 'value' is the binary file data. Ex. [{key: \"my-attachment.pdf\", value: <BINARY FILE DATA TO ATTACH>},{key: \"another-attachment.xlsx\", value: <BINARY EXCEL FILE DATA>}]",
      example:
        '[{key: "my-attachment.pdf", value: <BINARY FILE DATA TO ATTACH>},{key: "another-attachment.xlsx", value: <BINARY EXCEL FILE DATA>}]',
      required: false,
      key: "dynamicAttachments",
      type: "data",
      default: "",
      label: "Dynamic Attachments",
    },
    {
      comments: "For email clients that support HTML",
      key: "html",
      type: "string",
      default: "",
      label: "HTML body",
    },
    {
      required: true,
      key: "subject",
      type: "string",
      default: "",
      label: "Subject",
    },
    {
      comments: "For email clients that do not support HTML",
      key: "text",
      type: "string",
      default: "",
      label: "Plain text body",
    },
    {
      required: true,
      key: "to",
      type: "string",
      default: "",
      collection: "valuelist",
      label: "To",
    },
    {
      required: false,
      comments:
        "A user whose account to query (defaults to currently authenticated user)",
      key: "userId",
      type: "string",
      default: "",
      label: "Gmail User ID (optional)",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="trashmessagebyid" />

### Trash Message

Send a message to the trash | <small><b>key: trashMessageById</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      comments: "The Connection to use for authorization.",
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      required: true,
      example: "1234abcd",
      key: "messageId",
      type: "string",
      default: "",
      label: "Message ID",
    },
    {
      required: false,
      comments:
        "A user whose account to query (defaults to currently authenticated user)",
      key: "userId",
      type: "string",
      default: "",
      label: "Gmail User ID (optional)",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="untrashmessagebyid" />

### Untrash Message

Remove a message from the trash | <small><b>key: unTrashMessageById</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      comments: "The Connection to use for authorization.",
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      required: true,
      example: "1234abcd",
      key: "messageId",
      type: "string",
      default: "",
      label: "Message ID",
    },
    {
      required: false,
      comments:
        "A user whose account to query (defaults to currently authenticated user)",
      key: "userId",
      type: "string",
      default: "",
      label: "Gmail User ID (optional)",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="updatelabels" />

### Update Message Labels

Add or remove labels from a message | <small><b>key: updateLabels</b></small>

<ComponentInputsTable
  inputs={[
    {
      comments: "A list of labels to add (optional)",
      key: "addLabels",
      type: "string",
      default: "",
      collection: "valuelist",
      label: "Labels to Add",
    },
    {
      required: true,
      comments: "The Connection to use for authorization.",
      key: "connection",
      type: "connection",
      label: "Connection",
    },
    {
      required: true,
      example: "1234abcd",
      key: "messageId",
      type: "string",
      default: "",
      label: "Message ID",
    },
    {
      comments: "A list of labels to add (optional)",
      key: "removeLabels",
      type: "string",
      default: "",
      collection: "valuelist",
      label: "Labels to Remove",
    },
    {
      required: false,
      comments:
        "A user whose account to query (defaults to currently authenticated user)",
      key: "userId",
      type: "string",
      default: "",
      label: "Gmail User ID (optional)",
    },
  ]}
/>

<hr className="componentActionSeparator" />
