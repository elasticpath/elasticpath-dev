---
id: branch
title: Branch Component
sidebar_label: Branch
description: Choose which step to execute next based on a condition or value. Learn more about using Composer's Branch component.
---

[//]: # "DO NOT EDIT THIS FILE MANUALLY."
[//]: # "This file was auto generated using scripts in docusaurus/scripts/components/"

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import ComponentInputsTable from "@site/src/components/component-inputs-table";
import ExampleIntegrationLink from "@site/src/components/example-integration-link";
import OAuthCallbackURL from "@site/src/components/oauth-callback-url";
import Screenshot from "@site/src/components/screenshot";
import Vimeo from "@site/src/components/vimeo";

<div className="avatar">
  <div className="avatar__photo-link avatar__photo avatar__photo--lg">
    <img
      src="data:image/png;base64,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"
      alt="Branch"
    />
  </div>
  <div className="avatar__intro">
    <h4 className="avatar__name">
      Choose which step to execute next based on a condition or value
    </h4>
    <small className="avatar__subtitle">
      Component key: <b>branch</b>
    </small>
  </div>
</div>

## Description

The **branch** component allows you to add branching logic to your integration.
Think of **branches** like if/then or [switch/case](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch) programming statements.
Your integration can follow one branch or another depending on the values of some config variables or results from previous steps.

For example, if your integration accepts webhook requests with three different payload types (Order Create, Order Update, or Order delete), you can use the **Branch On Value** action to act accordingly:

<Screenshot filename="shared/branch-on-value.png" />

You can also use the **Branch On Expression** action to follow different branches of execution based on complex comparisons and expressions.
This is explained in more detail [below](#branch-on-expression).

## Actions

<div id="branchonexpression" />

### Branch on Expression

Choose which step to execute next based on a condition | <small><b>key: branchOnExpression</b></small>

<ComponentInputsTable
  inputs={[
    {
      placeholder: "Condition",
      required: true,
      comments: "The set of conditions to satisfy in order to branch.",
      key: "conditions",
      type: "conditional",
      collection: "keyvaluelist",
      label: "Condition",
    },
  ]}
/>

The **branch on expression** action allows you to create logical branches within your integration based on comparisons of config variables, results from previous steps, or static values.

The full list of comparison functions you can use is available on our [Building Integrations](/docs/composer/builder/building-integrations.mdx/#branch-on-expression-operators) article.

Multiple expressions can be grouped together with **And** or **Or** clauses, which execute like programming **and** and **or** clauses.
Take, for example, this programming expression:

```
if ((foo > 500 and bar <= 20) or ("b" in ["a","b","c"]))
```

The same logic can be represented with a group of conditionals:

<Screenshot filename="shared/branch-on-expression-logic.png" maxWidth="500px" />

#### Output Example Payload

```
{
  "data": "Example Branch",
  "branch": "Example Branch"
}
```

<hr className="componentActionSeparator" />

<div id="branchonvalue" />

### Branch on Value

Choose which step to execute next based on a value. | <small><b>key: branchOnValue</b></small>

<ComponentInputsTable
  inputs={[
    {
      placeholder: "Value",
      required: true,
      comments: "The branches that are associated with an expected value.",
      example: "",
      key: "branchValueMappings",
      type: "string",
      default: "",
      collection: "keyvaluelist",
      label: "Branch Value Mapping",
    },
    {
      placeholder: "Value",
      required: true,
      comments:
        "The value used for routing to a branch. This should reference a config variable or output from a previous step.",
      key: "inputValue",
      type: "string",
      default: "",
      label: "Input Value",
    },
  ]}
/>

The **branch on value** action allows you to branch into one of many paths of an integration based on an input and branch mapping.
Think of it like a [switch/case](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch) or **if/elseif/else** statement.

For example, if you have a config variable that could be set to `"sms"`, `"email"` or `"slack"` based on how your customer would like to receive notifications, you can create branches for SMS, email, and Slack:

<Screenshot filename="shared/branch-on-expression.png" />

This setup would be equivalent to some pseudocode reading:

```
if required_config_vars.notification_preference == "sms":
  send_an_sms()
else if required_config_vars.notification_preference == "email":
  send_an_email()
else:
  send_a_slack_message()

// or

switch(required_config_vars.notification_preference) {
  case "sms":
    send_an_sms()
    break
  case "email":
    send_an_email()
    break
  default:
    send_a_slack_message()
}
```

An "else" branch is generated in the case that the input value does not match any of the values in your branch value mapping.
In the example above, if the notification preference config variable is not equal to "sms" or "email", it's assumed that it must be equal to "slack", and the "Slack" branch is executed.

#### Output Example Payload

```
{
  "data": "Example Branch",
  "branch": "Example Branch"
}
```

<hr className="componentActionSeparator" />

<div id="selectexecutedstepresult" />

### Select Executed Step Result

Given a collection of step results, returns the results of whichever step was executed and returned a result. | <small><b>key: selectExecutedStepResult</b></small>

<ComponentInputsTable
  inputs={[
    {
      placeholder: "Step Results",
      required: true,
      comments:
        "The set of step results to consider when selecting a result from an executed step.",
      key: "stepResults",
      type: "data",
      default: "",
      collection: "valuelist",
      label: "Step Result",
    },
  ]}
/>

Regardless of which branch is followed, branches always converge to a single point.
Once a branch has executed, the integration will continue with the next step listed below the branch convergence.

This presents a problem: how do steps below the convergence reference steps in branches that may or may not have executed (depending on which branch was followed)?
In your integration you may want to say "if branch _foo_ was executed, get the results from _step A_, and if branch _bar_ was executed, get the results instead from _step B_."
Composer provides this action to handle that scenario.

Imagine that you have two branches - one for incoming invoices, and one for outgoing invoices, with different logic contained in each.
Regardless of which branch was executed, you'd like to insert the resulting data into an ERP.
You can leverage this action to say "get me the incoming or outgoing invoice - whichever one was executed."

This action iterates over the list of step results that you specify, and returns the first one that has a non-null value (which indicates that it ran).

<Screenshot filename="shared/select-executed-step-result.png" />

Within the component configuration drawer, select the step(s) whose results you would like, and this step will yield the result of whichever one was executed.

#### Output Example Payload

```
{
  "data": "Example"
}
```

<hr className="componentActionSeparator" />
