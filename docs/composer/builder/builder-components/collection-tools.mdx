---
id: collection-tools
title: Collection Tools Component
sidebar_label: Collection Tools
description: Common collection operations. Learn more about using Composer's Collection Tools component.
---

[//]: # "DO NOT EDIT THIS FILE MANUALLY."
[//]: # "This file was auto generated using scripts in docusaurus/scripts/components/"

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import ComponentInputsTable from "@site/src/components/component-inputs-table";
import ExampleIntegrationLink from "@site/src/components/example-integration-link";
import OAuthCallbackURL from "@site/src/components/oauth-callback-url";
import Screenshot from "@site/src/components/screenshot";
import Vimeo from "@site/src/components/vimeo";

<div className="avatar">
  <div className="avatar__photo-link avatar__photo avatar__photo--lg">
    <img
      src="data:image/png;base64,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"
      alt="Collection Tools"
    />
  </div>
  <div className="avatar__intro">
    <h4 className="avatar__name">Common collection operations</h4>
    <small className="avatar__subtitle">
      Component key: <b>collection-tools</b>
    </small>
  </div>
</div>

## Description

The collection tools component contains actions that let you perform common tasks on collections of data (objects and arrays).
You can do things like concatenate objects, filter items of lists (arrays), map functions on items, and more.

We use the terms **list** and **array** interchangably on this page.
Both describe a set of objects.
Similarly, the terms **items** and **elements** of a list are used interchangably.

The functions that you provide these actions for filtering, mapping, etc., should be NodeJS functions.
Examples are below.

## Actions

<div id="addkey" />

### Add Key/Value to Object

Add a value to an object with the given key | <small><b>key: addKey</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      comments: "My Comments",
      example: "FirstName",
      key: "key",
      type: "string",
      default: "",
      label: "Key",
    },
    {
      required: true,
      language: "json",
      example:
        '{\n  "employee": {\n    "id": "123",\n    "hired": "2022-03-05T00:08:00",\n    "contact": {\n      "phone": "6024441234"\n    }\n  }\n}',
      key: "object",
      type: "code",
      default: "",
      label: "Object",
    },
    {
      required: false,
      comments:
        "Optionally define a path using dot notation of where to add the key/value",
      example: "employee.contact",
      key: "objectPath",
      type: "string",
      default: "",
      label: "Insert Path",
    },
    {
      required: true,
      example: "Jake",
      key: "value",
      type: "string",
      default: "",
      label: "Value",
    },
  ]}
/>

If you would like to insert a key/value pair into a nested portion of the object, use the **Insert Path** input to specify where it should be added.
For example, if your object reads:

```json
{
  "employee": {
    "id": "123",
    "hired": "2022-03-05T00:08:00",
    "contact": {
      "phone": "6024441234"
    }
  }
}
```

You can add an email address to `contact` by specifying `"email"` for **Key**, `"example@company.com"` for **Value**, and `employee.contact` for **Insert Path**.
The result will be:

```json
{
  "employee": {
    "id": "123",
    "hired": "2022-03-05T00:08:00",
    "contact": {
      "phone": "6024441234",
      "email": "example@company.com"
    }
  }
}
```

#### Output Example Payload

```
{
  "data": {
    "FirstName": "Foo",
    "LastName": "Bar"
  }
}
```

<hr className="componentActionSeparator" />

<div id="aggregate" />

### Aggregate

Apply aggregate function to list | <small><b>key: aggregate</b></small>

<ComponentInputsTable
  inputs={[
    {
      model: [
        {
          label: "AVERAGE",
          value: "AVERAGE",
        },
        {
          label: "COUNT",
          value: "COUNT",
        },
        {
          label: "MAX",
          value: "MAX",
        },
        {
          label: "MIN",
          value: "MIN",
        },
        {
          label: "SUM",
          value: "SUM",
        },
        {
          label: "PRODUCT",
          value: "PRODUCT",
        },
        {
          label: "MEDIAN",
          value: "MEDIAN",
        },
      ],
      example: "SUM",
      required: true,
      comments:
        "Aggregate function to apply (choose from AVERAGE, COUNT, MAX, MIN, SUM, PRODUCT, MEDIAN).",
      key: "aggregateFunctionInput",
      type: "string",
      default: "",
      label: "Aggregate Function",
    },
    {
      language: "javascript",
      example: "(item) => item.prop > 17",
      comments: "Filter out any elements that do not return true",
      key: "filterCodeInput",
      type: "code",
      default: "(item, index) => { return true; }",
      label: "Filter Function",
    },
    {
      language: "json",
      required: true,
      comments: "Reference to a list of data to operate on",
      key: "listInput",
      type: "code",
      default: "",
      label: "List",
    },
  ]}
/>

This action applys the filter function (if given) first, and then applies the aggregate function to the filtered list.
See the [Filter](#filter) action for examples of how to use the filter function.

#### Output Example Payload

```
{
  "data": 117
}
```

<hr className="componentActionSeparator" />

<div id="append" />

### Append

Append element to the end of the list | <small><b>key: append</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      comments: "The item to append to the end of the list",
      key: "elementInput",
      type: "data",
      default: "",
      label: "Element",
    },
    {
      language: "json",
      required: true,
      comments: "Reference to a list of data to operate on",
      key: "listInput",
      type: "code",
      default: "",
      label: "List",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": {
    "list": [
      1,
      2,
      3,
      4
    ]
  }
}
```

<hr className="componentActionSeparator" />

<div id="chunks" />

### Chunks

Chunk the list into lists of the specified number of elements | <small><b>key: chunks</b></small>

<ComponentInputsTable
  inputs={[
    {
      language: "json",
      required: true,
      comments: "Reference to a list of data to operate on",
      key: "listInput",
      type: "code",
      default: "",
      label: "List",
    },
    {
      required: true,
      example: "3",
      comments: "Number of elements to take",
      key: "numberInput",
      type: "string",
      default: "1",
      label: "Number of Elements",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": [
    [
      1,
      2,
      3
    ],
    [
      4,
      5,
      6
    ],
    [
      7,
      8
    ]
  ]
}
```

<hr className="componentActionSeparator" />

<div id="combinecollections" />

### Combine Collection

[Deprecated - use 'Create Object'] | <small><b>key: combineCollections</b></small>

<ComponentInputsTable
  inputs={[
    {
      placeholder: "{'Customer': {'Name': 'Acme Contracting}}",
      required: true,
      comments:
        "Returns an object with the specified key and corresponding collection as the value",
      example:
        '[\n        {"key": "CustomerQueryResult", "value": { Customer: { Name: "Acme Contracting" } }},\n        {"key": "AccountQueryResult", "value": { Account: { AccountId: "123123123" } }},\n      ]',
      key: "collections",
      type: "string",
      default: "",
      collection: "keyvaluelist",
      label: "Collections",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": {
    "CustomerQueryResult": {
      "Customer": {
        "Name": "Acme Contracting"
      }
    },
    "AccountQueryResult": {
      "Account": {
        "AccountId": "123123123"
      }
    }
  }
}
```

<hr className="componentActionSeparator" />

<div id="concatenate" />

### Concatenate

Concatenate two lists together into a single list | <small><b>key: concatenate</b></small>

<ComponentInputsTable
  inputs={[
    {
      language: "json",
      required: true,
      comments: "Reference to a list of data to operate on",
      example: "[4,5,6]",
      key: "anotherListInput",
      type: "code",
      default: "",
      label: "List",
    },
    {
      language: "json",
      required: true,
      comments: "Reference to a list of data to operate on",
      example: "[1,2,3]",
      key: "listInput",
      type: "code",
      default: "",
      label: "List",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": [
    1,
    2,
    3,
    4,
    5,
    6
  ]
}
```

<hr className="componentActionSeparator" />

<div id="count" />

### Count

Count the number of occurrences of element in list | <small><b>key: count</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      comments: "Reference to an element to look for",
      key: "elementInput",
      type: "data",
      default: "",
      label: "Element",
    },
    {
      language: "json",
      required: true,
      comments: "Reference to a list of data to operate on",
      key: "listInput",
      type: "code",
      default: "",
      label: "List",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": 3
}
```

<hr className="componentActionSeparator" />

<div id="create" />

### Create List

Create a new list with the given inputs | <small><b>key: create</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: false,
      key: "items",
      type: "data",
      default: "",
      collection: "valuelist",
      label: "List Items",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": [
    1,
    2,
    3,
    4
  ]
}
```

<hr className="componentActionSeparator" />

<div id="createobject" />

### Create Object

Creates a new object from provided key/value pairs | <small><b>key: createObject</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      comments: "Key and value pairs",
      key: "keyValueInput",
      type: "data",
      default: "",
      collection: "keyvaluelist",
      label: "Key & Value Pairs",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": {
    "first": "value",
    "second": 17
  }
}
```

<hr className="componentActionSeparator" />

<div id="deduplicate" />

### De-duplicate

De-duplicate the elements of the list | <small><b>key: deduplicate</b></small>

<ComponentInputsTable
  inputs={[
    {
      language: "json",
      required: true,
      comments: "Reference to a list of data to operate on",
      key: "listInput",
      type: "code",
      default: "",
      label: "List",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": [
    1,
    2,
    3
  ]
}
```

<hr className="componentActionSeparator" />

<div id="fieldvaluemapping" />

### Field Value Mapping

Maps the values from two different collections and returns a key/value list where the 'key' is the value of the Key Mappings input and the 'value' is the value of the Value Mappings input | <small><b>key: fieldValueMapping</b></small>

<ComponentInputsTable
  inputs={[
    {
      example:
        '[{"key":"AccountName","value":"Deploy_Time_Specified_Account_Name__c"},{"key":"AccountValue","value":"Deploy_Time_Specified_Account_Value__c"}]',
      key: "mappings",
      type: "data",
      default: "",
      label: "Key Mappings",
    },
    {
      example:
        '[{"key":"AccountName","value":"bar"},{"key":"AccountValue","value":"baz"}]',
      key: "values",
      type: "string",
      default: "",
      collection: "keyvaluelist",
      label: "Value Mappings",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": [
    {
      "key": "Deploy_Time_Specified_Account_Name__c",
      "value": "bar"
    },
    {
      "key": "Deploy_Time_Specified_Account_Value__c",
      "value": "baz"
    }
  ]
}
```

<hr className="componentActionSeparator" />

<div id="filter" />

### Filter

Filter elements of a list | <small><b>key: filter</b></small>

<ComponentInputsTable
  inputs={[
    {
      language: "javascript",
      example: "(item) => item.prop > 17",
      comments: "Filter out any elements that do not return true",
      key: "filterCodeInput",
      type: "code",
      default: "(item, index) => { return true; }",
      label: "Filter Function",
    },
    {
      language: "json",
      required: true,
      comments: "Reference to a list of data to operate on",
      example:
        '[\n  {\n    "name": "Widget",\n    "prop": 25\n  },\n  {\n    "name": "Thingy",\n    "prop": 10\n  },\n  {\n    "name": "Whatsit",\n    "prop": 19\n  }\n]',
      key: "listInput",
      type: "code",
      default: "",
      label: "List",
    },
  ]}
/>

This action applies a NodeJS [filter function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter) to an array of data.
The filter function should use arrow notation, and include an input (an element) and a function that evaluates to `true` or `false`.
Its return value is an array of elements that evaluated to `true`.

#### Simple Filter

For example, if you have an array, `["exuberant", "spray", "limit", "elite", "destruction", "present"]`, and you would like words with a length greater than 6, your filter function could read:

```typescript
(word) => word.length > 6;
```

The result would be `["exuberant", "destruction", "present"]` - all words whose length is greater than 6.

#### Filters on Objects

If your array is comprised of objects, you can apply a filter using each object's properties.

For example, suppose you have an array of objects like this:

```json
[
  {
    "name": "Widget",
    "cost": 80,
    "available": true
  },
  {
    "name": "Whatsits",
    "cost": 90,
    "available": false
  },
  {
    "name": "Whoseits",
    "cost": 120,
    "available": true
  },
  {
    "name": "Whysits",
    "cost": 75,
    "available": true
  }
]
```

If you want to find items whose cost is less than 100 that have `true` for availability, you can write a filter function like this:

```javascript
(item) => item.cost < 100 && item.available;
```

The return value of this example would be an array of two objects that passed the filter:

```javascript
[
  {
    name: "Widget",
    cost: 80,
    available: true,
  },
  {
    name: "Whysits",
    cost: 75,
    available: true,
  },
];
```

<hr className="componentActionSeparator" />

<div id="first" />

### First

Get first element from a list | <small><b>key: first</b></small>

<ComponentInputsTable
  inputs={[
    {
      language: "json",
      required: true,
      comments: "Reference to a list of data to operate on",
      key: "listInput",
      type: "code",
      default: "",
      label: "List",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="flatten" />

### Flatten

Flatten an array of arrays into a single array | <small><b>key: flatten</b></small>

<ComponentInputsTable
  inputs={[
    {
      language: "json",
      required: true,
      comments: "Reference to a list of data to operate on",
      example:
        "[\n  1,\n  [\n    2,\n    [\n      3,\n      [\n        4\n      ]\n    ],\n    5\n  ]\n]",
      key: "listInput",
      type: "code",
      default: "",
      label: "List",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": [
    1,
    2,
    [
      3,
      [
        4
      ]
    ],
    5
  ]
}
```

<hr className="componentActionSeparator" />

<div id="toobject" />

### Key Value Pair List to Object

Convert a Key Value list to an Object | <small><b>key: toObject</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      language: "json",
      example:
        '[\n  {\n    "key": "FirstName",\n    "value": "Foo"\n  },\n  {\n    "key": "LastName",\n    "value": "Bar"\n  }\n]',
      key: "kvList",
      type: "code",
      default: "",
      label: "Key/Value List",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": {
    "FirstName": "Foo",
    "LastName": "Bar"
  }
}
```

<hr className="componentActionSeparator" />

<div id="last" />

### Last

Get last element from a list | <small><b>key: last</b></small>

<ComponentInputsTable
  inputs={[
    {
      language: "json",
      required: true,
      comments: "Reference to a list of data to operate on",
      key: "listInput",
      type: "code",
      default: "",
      label: "List",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="length" />

### Length

Count the number of elements in list | <small><b>key: length</b></small>

<ComponentInputsTable
  inputs={[
    {
      language: "json",
      required: true,
      comments: "Reference to a list of data to operate on",
      key: "listInput",
      type: "code",
      default: "",
      label: "List",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": 7
}
```

<hr className="componentActionSeparator" />

<div id="map" />

### Map

Transform a list and its elements | <small><b>key: map</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: false,
      comments:
        "Additional contextual data to supply to the transform and filter functions",
      key: "contextInput",
      type: "data",
      default: "",
      label: "Context Data",
    },
    {
      language: "javascript",
      example: "(item) => item.prop > 17",
      comments: "Filter out any elements that do not return true",
      key: "filterCodeInput",
      type: "code",
      default: "(item, index) => { return true; }",
      label: "Filter Function",
    },
    {
      language: "json",
      required: true,
      comments: "Reference to a list of data to operate on",
      key: "listInput",
      type: "code",
      default: "",
      label: "List",
    },
    {
      language: "javascript",
      example: "(item) => item.prop",
      comments: "Function to transform each element",
      key: "transformCodeInput",
      type: "code",
      default: "(item, index) => { return item; }",
      label: "Transform (map) Function",
    },
  ]}
/>

This action applies a NodeJS [map function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map) to an array of data.

It also has an optional [filter function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter) - see the [Filter](#filter) action for examples.
The action applies the filter function (if present), and then the map function to your array.

#### Simple Map Function

If you have an array of integers that represent pennies, like `[1234, 567, 890]`, and you would like to turn all values in dollar amounts, you could divide all values using a map function like this:

```javascript
(value) => value / 100;
```

The result of the step would be an array that reads `[12.34, 5.67, 8.9]`

#### Mapping on Objects

If you have an array of objects, you can reference the object's fields in your map function.
Suppose you have an array of "people" objects, and you'd like to concatenate their names and order in the list.

Your data might look like this:

```json
[
  { "first": "Bob", "last": "Smith", "middle": "Billy" },
  { "first": "John", "last": "Doe" },
  { "first": "Lisa", "last": "Nguyen", "middle": "Sue" }
]
```

Your map function could look like this:

```javascript
(person, index) => {
  if (person.middle) {
    return `${index} - ${person.last}, ${person.first} ${person.middle[0]}.`;
  } else {
    return `${index} - ${person.last}, ${person.first}`;
  }
};
```

The result of the step would be an array of strings:

```json
["0 - Smith, Bob B.", "1 - Doe, John", "2 - Nguyen, Lisa S."]
```

### Providing additional context to the map function

You can provide additional context to the map function by using the `context` input.
`context` can be anything - a string, number or object.

For example, suppose your data is an array of objects:

```json
[
  { "product": "Item 1", "price": 10 },
  { "product": "Item 2", "price": 11 },
  { "product": "Item 3", "price": 12 },
  { "product": "Item 4", "price": 9 },
  { "product": "Item 5", "price": 15 },
  { "product": "Item 6", "price": 16 }
]
```

If you provide the context as an object:

```json
{ "minPrice": 10, "prepend": "My" }
```

And your filter function looks like this:

```javascript
(item, index, context) => {
  return item.price > context.minPrice;
};
```

And your map function looks like this:

```javascript
(item, index, context) => {
  return `${context.prepend} ${item.product}`;
};
```

Then your result would be the names of all items with a price greater than 10, with `"My "` prepended to the name:

```json
["My Item 2", "My Item 3", "My Item 5", "My Item 6"]
```

<hr className="componentActionSeparator" />

<div id="fromobject" />

### Object to Key Value Pair List

Convert an Object to a Key Value List | <small><b>key: fromObject</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      example: '{ FirstName: "Foo", LastName: "Bar" }',
      key: "object",
      type: "data",
      default: "",
      label: "Object",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="processinorder" />

### Process In Order

Ensures that payloads are processed in order across executions according to an ordering specified by a payload attribute. Returns the largest possible set of ordered payloads on the Process branch, and otherwise follows the Skip branch and returns the current item. | <small><b>key: processInOrder</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      comments:
        "A value that uniquely identifies the collection that is being processed out of order.",
      example: "da41e39f-ea4d-435a-b922-c6aae3915ebe",
      key: "collectionId",
      type: "string",
      default: "",
      label: "Collection ID",
    },
    {
      required: true,
      comments:
        "The number of items in the collection. When processing is finished the interim data for the collection is removed.",
      example: "100",
      key: "collectionLength",
      type: "data",
      default: "",
      label: "Collection Length",
    },
    {
      required: true,
      comments: "The current item to consider for processing.",
      example: '{ Index: 0, Name: "Acme Contracting" }',
      key: "item",
      type: "data",
      default: "",
      label: "Item",
    },
    {
      required: true,
      comments:
        "The integer value to consider as the index for the current item that specifies intended processing order. 0 is the first index value.",
      example: "10",
      key: "itemIndex",
      type: "data",
      default: "",
      label: "Item Index",
    },
  ]}
/>

The **Process In Order** action allows you to send several requests to an instance out of order, and helps to ensure that data runs through your integration in order.
Requests with data payloads are collected, and when an ordered set of requests have been received this action processes the requests in the order you specify.

In order to use this action, you will need to know how many total items you are sending ahead of time.

**Example**: suppose we are updating an inventory system with three updates, and order is important.
We want to process _widgets_ first, then _gadgets_, and finally _whatsits_.
We know that we have three items to import, and due to limitations of our third-party system we can't send them all at once.
We're not confident that they'll arrive to Composer in any particular order, so we'll use this action to help.

<Screenshot
  filename="components/collection-tools/processInOrder-integration.png"
  alt="Collection Tools - Process in Order flow in Composer integration designer"
/>

We'll come up with a unique "Collection ID", and begin sending our data in any order:

```bash "Data gets sent in any order"
$ curl 'https://hooks.us-east-2.elasticpathintegrations.com/trigger/EXAMPLE==' \
    --header "Content-Type: application/json" \
    --data '{"item": "whatsits", "index": 2}' \
    --header 'collectionid: abc-123' \
    --header 'collectionlength: 3'

$ curl 'https://hooks.us-east-2.elasticpathintegrations.com/trigger/EXAMPLE==' \
    --header "Content-Type: application/json" \
    --data '{"item": "widgets", "index": 0}' \
    --header 'collectionid: abc-123' \
    --header 'collectionlength: 3'

$ curl 'https://hooks.us-east-2.elasticpathintegrations.com/trigger/EXAMPLE==' \
    --header "Content-Type: application/json" \
    --data '{"item": "gadgets", "index": 1}' \
    --header 'collectionid: abc-123' \
    --header 'collectionlength: 3'
```

The first time that our integration is invoked, the `{"item": "whatsits", "index": 2}` payload will be stored for future processing, since items with index `0` and `1` have not yet been processed.

The second time that our integration is invoked, the `{"item": "widgets", "index": 0}` payload will be processed immediately, since it has index `0`, but then our loop will stop since an item with index `1` has not yet been received.

The third time our integration is invoked, the `{"item": "gadgets", "index": 1}` will be processed right away, since it has index `1` and an item with index `0` has already been processed.
The `{"item": "whatsits", "index": 2}` payload will also be pulled from storage and processed since it is next in line to be processed.

At this point all items will have been processed.

_Note_: Items must be zero-indexed.

#### Output Example Payload

```
{
  "data": [
    {
      "Index": 0,
      "Name": "Acme Contracting"
    },
    {
      "Index": 1,
      "Name": "FooBar Consulting"
    }
  ],
  "instanceState": {
    "7d577253-3ef0-4a0a-bb7f-8335c2596e70": {
      "da41e39f-ea4d-435a-b922-c6aae3915ebe": {
        "lastIndex": 1,
        "items": []
      }
    }
  },
  "branch": "Process"
}
```

<hr className="componentActionSeparator" />

<div id="remove" />

### Remove

Remove all occurrences of an element from a list | <small><b>key: remove</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      comments: "Reference to an element to look for",
      key: "elementInput",
      type: "data",
      default: "",
      label: "Element",
    },
    {
      language: "json",
      required: true,
      comments: "Reference to a list of data to operate on",
      key: "listInput",
      type: "code",
      default: "",
      label: "List",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": [
    1,
    3
  ]
}
```

<hr className="componentActionSeparator" />

<div id="selectitemfromlist" />

### Select Item From List by Index

Select an item by index from a list of items, supports nested lists | <small><b>key: selectItemFromList</b></small>

<ComponentInputsTable
  inputs={[
    {
      required: true,
      key: "indexInput",
      type: "data",
      default: "",
      collection: "valuelist",
      label: "Index",
    },
    {
      language: "json",
      required: true,
      comments: "Reference to a list of data to operate on",
      key: "listInput",
      type: "code",
      default: "",
      label: "List",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": [
    1,
    2,
    3,
    4
  ]
}
```

<hr className="componentActionSeparator" />

<div id="sort" />

### Sort

Sort elements using a JavaScript comparison function | <small><b>key: sort</b></small>

<ComponentInputsTable
  inputs={[
    {
      language: "json",
      required: true,
      comments: "Reference to a list of data to operate on",
      key: "list",
      type: "code",
      default:
        '[\n  {\n    "name": "Widget",\n    "prop": 25\n  },\n  {\n    "name": "Thingy",\n    "prop": 10\n  },\n  {\n    "name": "Whatsit",\n    "prop": 19\n  }\n]',
      label: "List",
    },
    {
      language: "javascript",
      comments:
        "Sort elements by the given comparison function. See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort for compare function documentation.",
      key: "sortComparisonFunction",
      type: "code",
      default: "(a, b) => { return a.prop < b.prop ? -1 : 1; }",
      label: "Sort Comparison Function",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="takefirst" />

### Take First

Take first number of elements from a list | <small><b>key: takeFirst</b></small>

<ComponentInputsTable
  inputs={[
    {
      language: "json",
      required: true,
      comments: "Reference to a list of data to operate on",
      key: "listInput",
      type: "code",
      default: "",
      label: "List",
    },
    {
      required: true,
      example: "3",
      comments: "Number of elements to take",
      key: "numberInput",
      type: "string",
      default: "1",
      label: "Number of Elements",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": [
    1,
    2,
    3
  ]
}
```

<hr className="componentActionSeparator" />

<div id="takelast" />

### Take Last

Take last number of elements from a list | <small><b>key: takeLast</b></small>

<ComponentInputsTable
  inputs={[
    {
      language: "json",
      required: true,
      comments: "Reference to a list of data to operate on",
      key: "listInput",
      type: "code",
      default: "",
      label: "List",
    },
    {
      required: true,
      example: "3",
      comments: "Number of elements to take",
      key: "numberInput",
      type: "string",
      default: "1",
      label: "Number of Elements",
    },
  ]}
/>

#### Output Example Payload

```
{
  "data": [
    7,
    8,
    9
  ]
}
```

<hr className="componentActionSeparator" />

<div id="validatejsonschema" />

### Validate JSON Schema

Validate a JSON input against a given schema, returning errors if not JSON input is not valid. | <small><b>key: validateJsonSchema</b></small>

<ComponentInputsTable
  inputs={[
    {
      language: "json",
      required: true,
      comments: "The JSON object to validate against the schema.",
      key: "jsonInput",
      type: "code",
      default: '{"someProperty":"value"}',
      label: "JSON Object",
    },
    {
      language: "json",
      required: true,
      comments: "The JSON schema to validate the input against.",
      key: "jsonSchema",
      type: "code",
      default:
        '{\n  "type": "object",\n  "properties": {\n    "someProperty": {\n      "type": "string"\n    }\n  },\n  "required": [\n    "someProperty"\n  ]\n}',
      label: "JSON Schema",
    },
  ]}
/>

<hr className="componentActionSeparator" />

<div id="validatexmlschema" />

### Validate XML Schema

Validate an XML input against a given XSD schema, returning errors if XML is not valid. | <small><b>key: validateXmlSchema</b></small>

<ComponentInputsTable
  inputs={[
    {
      language: "xml",
      required: true,
      comments: "The XML object to validate against the schema.",
      placeholder: "<someProperty>value</someProperty>",
      key: "xmlInput",
      type: "code",
      default: "",
      label: "XML",
    },
    {
      language: "xml",
      required: true,
      comments: "The XSD schema to use in validation.",
      key: "xmlSchema",
      type: "code",
      default: "",
      label: "XML Schema",
    },
  ]}
/>

<hr className="componentActionSeparator" />
